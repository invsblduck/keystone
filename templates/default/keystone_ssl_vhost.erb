# This file autogenerated by Chef
# Do not edit, changes will be overwritten

Listen <%= @service_ip %>:<%= @service_port %>
<VirtualHost <%= @service_ip %>:<%= @service_port %>>
  <% if @service_scheme == 'https' -%>
    SSLEngine             On
    SSLOptions            +StdEnvVars +ExportCertData
    SSLProtocol           all -SSLv2
    SSLCipherSuite        ALL:!ADH:!EXPORT:!SSLv2:RC4+RSA:+HIGH:+MEDIUM:+LOW
    SSLVerifyClient       optional
    SSLVerifyDepth        10
    SSLCACertificateFile  /etc/ssl/certs/ca-certificates.crt
    SSLCertificateFile    <%= @service_cert_file %>
    SSLCertificateKeyFile <%= @service_key_file %>
    <% unless @service_chain_file == 'donotset' -%>
    SSLCertificateChainFile  <%= @service_chain_file %>
    <% end -%>
  <% end -%>

    ProxyPass / http://127.0.0.1:<%= @service_port %>/
    ProxyPassReverse / http://127.0.0.1:<%= @service_port %>/

    LogLevel warn
    ErrorLog /var/log/keystone/service_error.log
    CustomLog /var/log/keystone/service_access.log combined
</VirtualHost>

Listen <%= @admin_ip %>:<%= @admin_port %>
<VirtualHost <%= @admin_ip %>:<%= @admin_port %>>
  <% if @admin_scheme == 'https' -%>
    SSLEngine             On
    SSLOptions            +StdEnvVars +ExportCertData
    SSLProtocol           all -SSLv2
    SSLCipherSuite        ALL:!ADH:!EXPORT:!SSLv2:RC4+RSA:+HIGH:+MEDIUM:+LOW
    SSLVerifyClient       optional
    SSLVerifyDepth        10
    SSLCACertificateFile  /etc/ssl/certs/ca-certificates.crt
    SSLCertificateKeyFile <%= @admin_key_file %>
    SSLCertificateFile    <%= @admin_cert_file %>
    <% unless @admin_chain_file == 'donotset' -%>
    SSLCertificateChainFile  <%= @admin_chain_file %>
    <% end -%>
  <% end -%>

    ProxyPass / http://127.0.0.1:<%= @admin_port %>/
    ProxyPassReverse / http://127.0.0.1:<%= @admin_port %>/

    LogLevel warn
    ErrorLog /var/log/keystone/admin_error.log
    CustomLog /var/log/keystone/admin_access.log combined
</VirtualHost>
